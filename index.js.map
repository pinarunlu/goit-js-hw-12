{"version":3,"file":"index.js","sources":["../src/js/main.js"],"sourcesContent":["\nimport axios from \"axios\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\n\n\nconst API_KEY = '46197993-0238acfcd6230053ff5f60fb7';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nconst searchForm = document.querySelector('#search-form');\nconst searchInput = document.querySelector('.search-input');\nconst gallery = document.querySelector('#gallery');\nconst loadMoreBtn = document.querySelector('#load-more');\nconst loadingMessage = document.querySelector('#loading-message');\n\nlet currentQuery = '';\nlet page = 1;\nlet totalHits = 0;  \nlet lightbox;\nlet isLoading = false;\n\n\nasync function fetchImages(query, page = 1) {\n  if (isLoading) return; \n  isLoading = true;\n  loadingMessage.style.display = 'block'; \n  \n  try {\n    const response = await axios.get(`${BASE_URL}`, {\n      params: {\n        key: API_KEY,\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        per_page: 40,  \n        page: page,\n      },\n    });\n    totalHits = response.data.totalHits;  \n    loadingMessage.style.display = 'none'; \n    isLoading = false;\n    return response.data;\n  } catch (error) {\n    loadingMessage.style.display = 'none';\n    isLoading = false;\n    console.error('Hata oluÅŸtu:', error);\n  }\n}\n\n\nfunction renderImages(images) {\n  const markup = images\n    .map(\n      (image) => `\n        <li class=\"gallery-item\">\n          <a href=\"${image.largeImageURL}\">\n            <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" loading=\"lazy\" />\n          </a>\n          <div class=\"info\">\n            <p><b>Likes:</b> ${image.likes}</p>\n            <p><b>Views:</b> ${image.views}</p>\n            <p><b>Comments:</b> ${image.comments}</p>\n            <p><b>Downloads:</b> ${image.downloads}</p>\n          </div>\n        </li>\n      `\n    )\n    .join('');\n  gallery.insertAdjacentHTML('beforeend', markup);\n\n   const lightbox = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt', \n    captionDelay: 250, \n  });\n\n\n  if (!lightbox) {\n    lightbox = new SimpleLightbox('.gallery a');\n    \n  } else {\n    lightbox.refresh();\n  }\n}\n\n\nsearchForm.addEventListener('submit', async (event) => {\n  event.preventDefault();\n  gallery.innerHTML = ''; \n  currentQuery = searchInput.value.trim();\n  if (!currentQuery) return;\n\n  page = 1; \n  const data = await fetchImages(currentQuery, page);\n  if (data.hits.length === 0) {\n    loadMoreBtn.style.display = 'none';\n    \n\n    iziToast.error({\n      title: 'No Results',\n      message: \"No images found. Please try a different query.\",\n      position: 'topRight', \n    });\n    return;\n  }\n\n  renderImages(data.hits);\n  loadMoreBtn.style.display = 'block'; \n  searchInput.value = ''; \n\n \n  if (page * 40 >= totalHits) {\n    loadMoreBtn.style.display = 'none';\n    iziToast.error({\n      title: 'Sorry',\n      message: \"We're sorry, but you've reached the end of search results.\",\n      position: 'topRight', \n    });\n  }\n});\n\n\nloadMoreBtn.addEventListener('click', async () => {\n  page += 1;\n  const data = await fetchImages(currentQuery, page);\n  renderImages(data.hits);\n\n\n  if (page * 40 >= totalHits) {\n    loadMoreBtn.style.display = 'none';\n    iziToast.error({\n      title: 'Sorry',\n      message: \"We're sorry, but you've reached the end of search results.\",\n      position: 'topRight', \n    });\n  }\n\n\n  const { height: cardHeight } = document\n    .querySelector('.gallery')\n    .firstElementChild.getBoundingClientRect();\n\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n});"],"names":["API_KEY","BASE_URL","searchForm","searchInput","gallery","loadMoreBtn","loadingMessage","currentQuery","page","totalHits","isLoading","fetchImages","query","response","axios","error","renderImages","images","markup","image","lightbox","SimpleLightbox","event","data","iziToast","cardHeight"],"mappings":"owBASA,MAAMA,EAAU,qCACVC,EAAW,2BAEXC,EAAa,SAAS,cAAc,cAAc,EAClDC,EAAc,SAAS,cAAc,eAAe,EACpDC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAc,SAAS,cAAc,YAAY,EACjDC,EAAiB,SAAS,cAAc,kBAAkB,EAEhE,IAAIC,EAAe,GACfC,EAAO,EACPC,EAAY,EAEZC,EAAY,GAGhB,eAAeC,EAAYC,EAAOJ,EAAO,EAAG,CAC1C,GAAI,CAAAE,EACJ,CAAAA,EAAY,GACZJ,EAAe,MAAM,QAAU,QAE/B,GAAI,CACF,MAAMO,EAAW,MAAMC,EAAM,IAAI,GAAGb,CAAQ,GAAI,CAC9C,OAAQ,CACN,IAAKD,EACL,EAAGY,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAU,GACV,KAAMJ,CACP,CACP,CAAK,EACD,OAAAC,EAAYI,EAAS,KAAK,UAC1BP,EAAe,MAAM,QAAU,OAC/BI,EAAY,GACLG,EAAS,IACjB,OAAQE,EAAO,CACdT,EAAe,MAAM,QAAU,OAC/BI,EAAY,GACZ,QAAQ,MAAM,eAAgBK,CAAK,CACpC,EACH,CAGA,SAASC,EAAaC,EAAQ,CAC5B,MAAMC,EAASD,EACZ,IACEE,GAAU;AAAA;AAAA,qBAEIA,EAAM,aAAa;AAAA,wBAChBA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA;AAAA,+BAG/BA,EAAM,KAAK;AAAA,+BACXA,EAAM,KAAK;AAAA,kCACRA,EAAM,QAAQ;AAAA,mCACbA,EAAM,SAAS;AAAA;AAAA;AAAA,OAI7C,EACA,KAAK,EAAE,EACVf,EAAQ,mBAAmB,YAAac,CAAM,EAE7C,MAAME,EAAW,IAAIC,EAAe,aAAc,CACjD,aAAc,MACd,aAAc,GAClB,CAAG,EAGID,EAIHA,EAAS,QAAO,EAHhBA,EAAW,IAAIC,EAAe,YAAY,CAK9C,CAGAnB,EAAW,iBAAiB,SAAU,MAAOoB,GAAU,CAIrD,GAHAA,EAAM,eAAc,EACpBlB,EAAQ,UAAY,GACpBG,EAAeJ,EAAY,MAAM,OAC7B,CAACI,EAAc,OAEnBC,EAAO,EACP,MAAMe,EAAO,MAAMZ,EAAYJ,EAAcC,CAAI,EACjD,GAAIe,EAAK,KAAK,SAAW,EAAG,CAC1BlB,EAAY,MAAM,QAAU,OAG5BmB,EAAS,MAAM,CACb,MAAO,aACP,QAAS,iDACT,SAAU,UAChB,CAAK,EACD,MACD,CAEDR,EAAaO,EAAK,IAAI,EACtBlB,EAAY,MAAM,QAAU,QAC5BF,EAAY,MAAQ,GAGhBK,EAAO,IAAMC,IACfJ,EAAY,MAAM,QAAU,OAC5BmB,EAAS,MAAM,CACb,MAAO,QACP,QAAS,6DACT,SAAU,UAChB,CAAK,EAEL,CAAC,EAGDnB,EAAY,iBAAiB,QAAS,SAAY,CAChDG,GAAQ,EACR,MAAMe,EAAO,MAAMZ,EAAYJ,EAAcC,CAAI,EACjDQ,EAAaO,EAAK,IAAI,EAGlBf,EAAO,IAAMC,IACfJ,EAAY,MAAM,QAAU,OAC5BmB,EAAS,MAAM,CACb,MAAO,QACP,QAAS,6DACT,SAAU,UAChB,CAAK,GAIH,KAAM,CAAE,OAAQC,CAAU,EAAK,SAC5B,cAAc,UAAU,EACxB,kBAAkB,sBAAqB,EAE1C,OAAO,SAAS,CACd,IAAKA,EAAa,EAClB,SAAU,QACd,CAAG,CACH,CAAC"}